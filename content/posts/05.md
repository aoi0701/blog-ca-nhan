---
title: "Lập trình UDP Socket trong Java"
date: 2025-12-24
weight: 4
description: "Giới thiệu UDP Socket, đặc điểm, cách lập trình UDP Socket trong Java và so sánh với TCP"
tags: ["Java", "UDP Socket", "Lập trình mạng"]
categories: ["Lập trình mạng"]
draft: false
cover:
  image: "images/13.jpg"
---





<p align="center">
  <em>Minh họa mô hình lập trình Socket với UDP trong Java.</em>
</p>

Sau khi tìm hiểu **TCP Socket** – giao thức hướng kết nối và đảm bảo độ tin cậy, ta tiếp tục với một mô hình hoàn toàn khác: **UDP Socket**.

UDP được sử dụng rất nhiều trong các hệ thống yêu cầu:
- Tốc độ cao
- Độ trễ thấp
- Không cần đảm bảo 100% dữ liệu

Bài viết này sẽ giúp bạn hiểu **UDP Socket là gì**, cách hoạt động và cách lập trình UDP Socket trong Java.

---

## 1. UDP là gì?

![DNS](../../images/14.jpg)
<p align="center">
  <em>Minh họa cơ chế truyền dữ liệu không kết nối của giao thức UDP.</em>
</p>


**UDP (User Datagram Protocol)** là giao thức truyền dữ liệu:
- Không thiết lập kết nối trước
- Gửi dữ liệu trực tiếp
- Không xác nhận dữ liệu đã đến hay chưa

> UDP giống như **gửi thư không bảo đảm**:  
> gửi đi rất nhanh nhưng không chắc người nhận có nhận được hay không.

---

## 2. So sánh TCP và UDP

![DNS](../../images/15.png)

<p align="center">
  <em>So sánh cơ chế truyền dữ liệu giữa UDP và TCP, trong đó TCP sử dụng bắt tay ba bước (Three-way Handshake) còn UDP truyền dữ liệu không kết nối.</em>
</p>


| Tiêu chí | TCP | UDP |
|-------|-----|-----|
| Kết nối | Có | Không |
| Độ tin cậy | Cao | Thấp |
| Thứ tự dữ liệu | Có | Không |
| Tốc độ | Chậm hơn | Nhanh |
| Phù hợp | Web, file | Game, video |

---

## 3. Mô hình giao tiếp UDP

![DNS](../../images/17.webp)

<p align="center">
  <em>So sánh cơ chế giao tiếp giữa TCP và UDP, trong đó TCP đảm bảo kết nối và độ tin cậy còn UDP ưu tiên tốc độ truyền dữ liệu.</em>
</p>

UDP **không có Client – Server cố định** như TCP.  
Cả hai bên đều có thể:
- Gửi dữ liệu
- Nhận dữ liệu

Mô hình đơn giản:

```

DatagramSocket ↔ DatagramPacket

````

---

## 4. UDP Socket trong Java

Java hỗ trợ UDP thông qua 2 lớp chính:

| Lớp | Vai trò |
|----|--------|
| `DatagramSocket` | Socket UDP |
| `DatagramPacket` | Gói dữ liệu UDP |

---

## 5. Luồng dữ liệu trong UDP

Quy trình cơ bản:
1. Tạo `DatagramSocket`
2. Tạo `DatagramPacket`
3. Gửi hoặc nhận dữ liệu

UDP **không cần accept()** như TCP.

---

## 6. Ví dụ UDP Server đơn giản

### 6.1 UDP Server (Java)

```java
import java.net.DatagramPacket;
import java.net.DatagramSocket;

public class UDPServer {
    public static void main(String[] args) {
        try {
            DatagramSocket socket = new DatagramSocket(9876);
            System.out.println("UDP Server đang chạy...");

            byte[] buffer = new byte[1024];
            DatagramPacket packet = new DatagramPacket(buffer, buffer.length);

            socket.receive(packet);

            String message = new String(
                    packet.getData(), 0, packet.getLength()
            );
            System.out.println("Nhận từ client: " + message);

            socket.close();
        } catch (Exception e) {
            e.printStackTrace();
        }
    }
}
````

---

## 7. Ví dụ UDP Client đơn giản

```java
import java.net.DatagramPacket;
import java.net.DatagramSocket;
import java.net.InetAddress;

public class UDPClient {
    public static void main(String[] args) {
        try {
            DatagramSocket socket = new DatagramSocket();

            String message = "Xin chào UDP Server";
            byte[] data = message.getBytes();

            InetAddress address = InetAddress.getByName("localhost");
            DatagramPacket packet =
                    new DatagramPacket(data, data.length, address, 9876);

            socket.send(packet);
            socket.close();
        } catch (Exception e) {
            e.printStackTrace();
        }
    }
}
```

---

## 8. Đặc điểm quan trọng của UDP

### 8.1 Không đảm bảo dữ liệu

* Gói tin có thể bị mất
* Có thể đến trễ
* Có thể đến sai thứ tự

---

### 8.2 Không có kết nối cố định

* Không cần `connect()`
* Không cần `accept()`
* Mỗi gói tin là độc lập

---

## 9. Khi nào nên dùng UDP?

UDP phù hợp khi:

* Cần tốc độ cao
* Không yêu cầu dữ liệu chính xác tuyệt đối
* Có cơ chế xử lý lỗi riêng

Ví dụ:

* Game online
* Video call
* Live streaming
* IoT sensor
* DNS

---

## 10. Các lỗi thường gặp khi lập trình UDP

### 10.1 Gói tin quá lớn

UDP giới hạn kích thước gói tin (~64KB).

---

### 10.2 Không xử lý timeout

UDP có thể chờ mãi nếu không có dữ liệu gửi tới.

---

### 10.3 Không kiểm tra nguồn gửi

UDP dễ bị giả mạo địa chỉ nguồn nếu không kiểm tra.

---

## 11. Mở rộng: UDP trong thực tế

Trong ứng dụng thực tế:

* Thường kết hợp UDP + cơ chế xác nhận thủ công
* Hoặc kết hợp TCP cho dữ liệu quan trọng

---

## 12. Tổng kết

* UDP là giao thức **nhanh – nhẹ – đơn giản**
* Không đảm bảo dữ liệu nhưng hiệu năng cao
* Java hỗ trợ UDP qua `DatagramSocket`
* UDP rất phù hợp cho các hệ thống real-time


