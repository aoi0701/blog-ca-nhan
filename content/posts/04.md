---
title: "So sánh TCP và UDP trong Java"
date: 2025-12-25
weight: 5
description: "So sánh TCP và UDP trong Java, cách hoạt động, ưu nhược điểm và ví dụ lập trình TCP/UDP dễ hiểu"
tags: ["Java", "TCP", "UDP", "Socket", "Lập trình mạng"]
categories: ["Lập trình mạng"]
draft: false

cover:
  image: "images/18.jpg"
---



<p align="center">
  <em>So sánh cơ chế truyền dữ liệu giữa TCP (hướng kết nối, đảm bảo độ tin cậy và truyền lại khi lỗi) và UDP (không kết nối, không đảm bảo truyền lại dữ liệu).</em>
</p>


Sau khi đã làm quen với **TCP Socket trong Java**, câu hỏi mà rất nhiều người học lập trình mạng đặt ra là:

> **Khi nào nên dùng TCP? Khi nào nên dùng UDP?**

Cả hai đều là giao thức tầng Transport, nhưng cách hoạt động và mục đích sử dụng **hoàn toàn khác nhau**.
Bài viết này sẽ giúp bạn **hiểu rõ – nhớ lâu – áp dụng đúng** TCP và UDP trong Java.

---

## 1. TCP và UDP là gì?

![DNS](../../images/19.avif)
<p align="center">
  <em>So sánh cơ chế giao tiếp giữa TCP (bắt tay ba bước, đảm bảo độ tin cậy) và UDP (không kết nối, truyền dữ liệu nhanh).</em>
</p>

Trong lập trình mạng, dữ liệu từ máy này sang máy khác **không truyền trực tiếp**, mà thông qua các giao thức.

| Giao thức | Tên đầy đủ                    |
| --------- | ----------------------------- |
| TCP       | Transmission Control Protocol |
| UDP       | User Datagram Protocol        |

 Cả TCP và UDP đều chạy **trên IP**, nhưng:

* TCP ưu tiên **độ chính xác**
* UDP ưu tiên **tốc độ**

---

## 2. So sánh TCP và UDP – Tổng quan

| Tiêu chí       | TCP       | UDP           |
| -------------- | --------- | ------------- |
| Kết nối        | Có        | Không         |
| Độ tin cậy     | Rất cao   | Không đảm bảo |
| Thứ tự dữ liệu | Luôn đúng | Có thể sai    |
| Mất dữ liệu    | Không     | Có thể        |
| Kiểm soát lỗi  | Tự động   | Không         |
| Tốc độ         | Chậm hơn  | Rất nhanh     |
| Độ phức tạp    | Cao       | Thấp          |

---

## 3. So sánh bằng ví dụ đời thường (rất dễ nhớ)

>  **TCP giống như gọi điện thoại**
> → phải kết nối
> → nói chuyện liên tục
> → đảm bảo nghe rõ từng câu

>  **UDP giống như gửi tin nhắn**
> → gửi xong là xong
> → không chắc người nhận có đọc không

 Vì vậy:

* Gửi **file quan trọng** → TCP
* Gửi **dữ liệu thời gian thực** → UDP

---

## 4. TCP hoạt động như thế nào?
![DNS](../../images/20.jpg)<p align="center">
  <em>So sánh sự khác biệt giữa hai giao thức truyền tải UDP và TCP trong mạng máy tính.</em>
</p>


TCP hoạt động theo mô hình **Client – Server**:

```
Client → Kết nối → Server
Client ⇄ Trao đổi dữ liệu ⇄ Server
Client → Ngắt kết nối → Server
```

Đặc điểm:

* Có **3-way handshake**
* Gói tin mất sẽ được gửi lại
* Đảm bảo dữ liệu **đầy đủ & đúng thứ tự**

---

## 5. UDP hoạt động như thế nào?

UDP **không tạo kết nối trước**:

```
Client → Gửi gói tin → Server
```

Đặc điểm:

* Không kiểm tra server có nhận hay không
* Không đảm bảo thứ tự
* Không gửi lại gói tin bị mất

 Đổi lại: **tốc độ cực nhanh**

---

## 6. Lập trình TCP trong Java (demo đơn giản)

### 6.1 TCP Server

```java
import java.io.*;
import java.net.*;

public class TCPServer {
    public static void main(String[] args) throws Exception {
        ServerSocket server = new ServerSocket(1234);
        System.out.println("Server đang chạy...");

        Socket socket = server.accept();
        System.out.println("Client đã kết nối");

        BufferedReader in = new BufferedReader(
            new InputStreamReader(socket.getInputStream())
        );
        PrintWriter out = new PrintWriter(
            socket.getOutputStream(), true
        );

        String msg = in.readLine();
        out.println("Server nhận: " + msg);

        socket.close();
        server.close();
    }
}
```

### 6.2 TCP Client

```java
import java.io.*;
import java.net.*;

public class TCPClient {
    public static void main(String[] args) throws Exception {
        Socket socket = new Socket("localhost", 1234);

        PrintWriter out = new PrintWriter(
            socket.getOutputStream(), true
        );
        BufferedReader in = new BufferedReader(
            new InputStreamReader(socket.getInputStream())
        );

        out.println("Hello TCP");
        System.out.println(in.readLine());

        socket.close();
    }
}
```

 TCP dùng **I/O Stream**, code dài hơn nhưng **ổn định và an toàn**.

---

## 7. Lập trình UDP trong Java (demo dễ hiểu)

### 7.1 UDP Server

```java
import java.net.*;

public class UDPServer {
    public static void main(String[] args) throws Exception {
        DatagramSocket server = new DatagramSocket(9876);
        byte[] buffer = new byte[1024];

        DatagramPacket packet =
            new DatagramPacket(buffer, buffer.length);

        server.receive(packet);

        String msg = new String(
            packet.getData(), 0, packet.getLength()
        );
        System.out.println("Server nhận: " + msg);

        server.close();
    }
}
```

### 7.2 UDP Client

```java
import java.net.*;

public class UDPClient {
    public static void main(String[] args) throws Exception {
        DatagramSocket client = new DatagramSocket();
        byte[] data = "Hello UDP".getBytes();

        InetAddress ip = InetAddress.getByName("localhost");

        DatagramPacket packet =
            new DatagramPacket(data, data.length, ip, 9876);

        client.send(packet);
        client.close();
    }
}
```

 UDP **không dùng Stream**, chỉ gửi gói tin.

---

## 8. So sánh code TCP và UDP

| Tiêu chí      | TCP        | UDP      |
| ------------- | ---------- | -------- |
| Dễ viết       | Trung bình | Dễ       |
| Dễ hiểu       | Trung bình | Rất dễ   |
| Đa luồng      | Thường cần | Ít khi   |
| Kiểm soát lỗi | Tự động    | Tự xử lý |

---

## 9. Khi nào dùng TCP? 

Dùng **TCP** khi:

* Cần dữ liệu **chính xác**
* Không được mất gói tin

Ví dụ:

* Web (HTTP / HTTPS)
* Gửi email
* Chat text
* Truyền file

---

## 10. Khi nào dùng UDP? 

Dùng **UDP** khi:

* Ưu tiên **tốc độ**
* Chấp nhận mất dữ liệu

Ví dụ:

* Game online
* Video call
* Live streaming
* IoT sensor

---

## 11. Lỗi thường gặp khi học TCP & UDP

 **TCP**

* Server chưa chạy → `ConnectException`
* Server không đa luồng → client bị treo

 **UDP**

* Buffer nhỏ → mất dữ liệu
* Gửi xong không có phản hồi (do UDP không ACK)

---

## 12. Tổng kết 
* **TCP = An toàn – Chính xác**
* **UDP = Nhanh – Gọn**
* Java hỗ trợ cả hai rất tốt
* Hiểu TCP & UDP là nền tảng cho:

  * Chat Server
  * Truyền file
  * Game networking
  * Hệ thống phân tán

